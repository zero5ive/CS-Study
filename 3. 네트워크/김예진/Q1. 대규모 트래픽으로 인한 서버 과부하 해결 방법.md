서버가 리소스를 초과하는 요청을 받을 때 발생하는 과부하를 방지하고, 장애 발생 시 서비스의 연속성을 유지하기 위해서 다양한 방식을 사용할 수 있다. 

# 서버 확장 및 모니터링 (Scalability)
가장 기본이 되는 인프라 대응 전략이다.

모니터링: CPU 사용량, 메모리 부족(Swapping 발생 여부), 트래픽 병목 지점을 실시간 파악. (AWS CloudWatch, Netdata, Prometheus/Grafana)

Scale-up (수직 확장): 서버의 CPU나 RAM 성능을 높임. 관리가 쉽지만 하드웨어 한계와 비용 급증의 단점이 있음.

Scale-out (수평 확장): 서버 대수를 늘림. 무한 확장이 가능하며 장애 내성이 높음. **Stateless(무상태)**한 애플리케이션 설계가 필수. (AWS Auto Scaling)

# 모니터링 및 자원 할당
서버 과부하는 CPU 사용량(80~90%) 임계치 도달이나 메모리 부족으로 인한 **스와핑(Swapping)** 발생 시 주로 나타난다.
> **스와핑(Swapping):** 메모리에서 사용되지 않는 프로세스를 보조기억장치로 옮겨서 생긴 메모리 상의 빈 공간에 또 다른 프로세스를 적재하여 실행하는 방식

모니터링은 트래픽 병목 지점 파악, 페이지 활용도 분석을 통한 서비스 개선 및 서비스 중단 선제적 대응 등을 하는 데에 의의가 있다.

**예시**
* **AWS Auto Scaling**: CloudWatch가 리소스를 실시간 모니터링하여 설정된 임계치 도달 시 서버 대수를 자동으로 증설한다.
* **Netdata**: 온프레미스 또는 비 AWS 환경에서 사용 가능한 실시간 모니터링 도구. 메신저 연동을 통해 즉각적인 장애 알림 시스템 구축이 가능하다.

# 부하 분산 및 장애 전파 방지

## 로드밸런서
앞단에서 트래픽을 분산하여 특정 서버에 부하가 집중되는 것을 막는다. 특정 서버 장애 시 건강한 서버로 트래픽을 리다이렉션하여 무중단 서비스를 구현할 수 있다.

## 서킷 브레이커
서로 다른 시스템 간의 연동 시 연쇄적 오류 전파(Cascading Failure)를 차단하는 기법. 
서로 다른 시스템 간의 연동 시 이상을 감지하고, 이상이 발생하면 연동을 차단하고, 이후 이상이 회복되면 자동으로 다시 연동하기 위한 기술이다.

### **서킷 브레이커의 3가지 보통 상태**
1.  **CLOSED**: 실패율이 임계치 미만이며 정상적으로 요청을 전달
2.  **OPEN**: 실패율 초과 시 요청을 즉시 차단하고 에러를 반환(**Fail Fast**)
3.  **HALF_OPEN**: 일정 시간 동안 OPEN 이후에 변경되는 상태. 장애 복구 여부를 확인하기 위해 일부 요청만 전송하여 성공 시 `CLOSED`, 실패 시 다시 `OPEN` 상태가 된다.

![](https://velog.velcdn.com/images/yejiiiin/post/4b244337-c957-44d1-a288-a1199fddf7c2/image.png)


**주요 라이브러리**: Netflix Hystrix, Resilience4j


# 컨텐츠 관리 및 최적화 전략

## 리소스 최적화
* **불필요한 리소스 제거**: READ IO의 병목을 주는 무거운 쿼리 등을 제거
  - 예시: [2022년 1월 100% 할인 이벤트 장애 부검 - INFLAB tech](https://tech.inflab.com/202201-event-postmortem/)
* **CDN (Content Delivery Network)**: 물리적으로 가까운 엣지 서버에서 콘텐츠를 제공하여 메인 서버 부하를 감소시킴
* **캐싱**: 브라우저 캐시(LocalStorage, SessionStorage, Cookie)를 활용해 불필요한 네트워크 요청 비용을 제거
* **컨텐츠 압축**: `Gzip`이나 `Brotli`를 사용하여 텍스트 리소스를 최대 70%까지 압축 전송. (단 압축 해제에 필요한 CPU 자원 소모량과 Trade-off 고려해야 함)

## 우아한 저하 (Graceful Degradation)
시스템 과부하 시 필수적이지 않은 기능을 일시적으로 제한하여 핵심 기능을 유지하는 전략.

* **사례**: 대규모 트래픽 발생 시의 NHK의 경량화 페이지(이미지/영상 제외, 텍스트 위주 구성)
* **방법**: 검색 기능 비활성화, 정적 페이지 우선 제공, 이미지 저화질 처리 등